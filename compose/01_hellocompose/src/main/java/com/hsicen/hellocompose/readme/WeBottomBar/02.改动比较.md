
原始代码：

   TabItem(selectIcon(0, select), "聊天", selectColor(0 == select),
      Modifier
        .weight(1f)
        .clickable { onSelect?.invoke(0) })

改变后的代码

 TabItem(
        iconId = if (selected) tab.iconFilled else tab.iconOutlined,
        title = tab.title,
        tint = selectColor(selected),
        modifier = Modifier
          .weight(1f)
          .clickable { onSelect(index) }
      )


 这个方法就不需要了
private fun selectIcon(pos: Int, select: Int): Int {
  return when (pos) {
    0 -> if (0 == select) R.drawable.ic_chat_filled else R.drawable.ic_chat_outlined
    1 -> if (1 == select) R.drawable.ic_contacts_filled else R.drawable.ic_contacts_outlined
    2 -> if (2 == select) R.drawable.ic_discovery_filled else R.drawable.ic_discovery_outlined
    else -> if (3 == select) R.drawable.ic_me_filled else R.drawable.ic_me_outlined
  }
}


data class BottomTab(
  val title: String,
  @DrawableRes val iconFilled: Int,
  @DrawableRes val iconOutlined: Int
)

private val tabs = listOf(
  BottomTab("聊天", R.drawable.ic_chat_filled, R.drawable.ic_chat_outlined),
  BottomTab("通讯录", R.drawable.ic_contacts_filled, R.drawable.ic_contacts_outlined),
  BottomTab("发现", R.drawable.ic_discovery_filled, R.drawable.ic_discovery_outlined),
  BottomTab("我", R.drawable.ic_me_filled, R.drawable.ic_me_outlined)
)



 compos 因为是控件的堆叠，就像底部的tab，也是堆叠的，
 这个时候代码就很多的冗余，更好的优化，就是类似RecycleView的操作，数据驱动



按照上面的这个修改，整个代码量将会降低很多

--------------------------------------------------------------------------------------------
  下面将给出完整的代码

 这些是数据准备，就不需要放到 WeBottomBar

data class BottomTab(
  val title: String,
  @DrawableRes val iconFilled: Int,
  @DrawableRes val iconOutlined: Int
)

下面的这个放到vm里面就可以了
private val tabs = listOf(
  BottomTab("聊天", R.drawable.ic_chat_filled, R.drawable.ic_chat_outlined),
  BottomTab("通讯录", R.drawable.ic_contacts_filled, R.drawable.ic_contacts_outlined),
  BottomTab("发现", R.drawable.ic_discovery_filled, R.drawable.ic_discovery_outlined),
  BottomTab("我", R.drawable.ic_me_filled, R.drawable.ic_me_outlined)
)


WeBottomBar 里面的代码;这样就简单的很

@Composable
fun WeBottomBar(select: Int, onSelect: (Int) -> Unit) {
  Row(Modifier.background(WeComposeTheme.colors.bottomBar)) {
    tabs.forEachIndexed { index, tab ->
      val selected = index == select
      TabItem(
        iconId = if (selected) tab.iconFilled else tab.iconOutlined,
        title = tab.title,
        tint = selectColor(selected),
        modifier = Modifier
          .weight(1f)
          .clickable { onSelect(index) }
      )
    }
  }
}


@Composable
fun TabItem(@DrawableRes iconId: Int, title: String, tint: Color, modifier: Modifier = Modifier) {
  Column(
    modifier.padding(vertical = 8.dp),
    horizontalAlignment = Alignment.CenterHorizontally
  ) {
    Icon(painterResource(iconId), title, Modifier.size(24.dp), tint)
    Text(text = title, fontSize = 11.sp, color = tint)
  }
}

@Composable
private fun selectColor(select: Boolean) =
  if (select) WeComposeTheme.colors.iconCurrent
  else WeComposeTheme.colors.icon
