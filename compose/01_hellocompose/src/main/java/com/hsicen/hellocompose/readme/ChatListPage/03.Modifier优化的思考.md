


-----------------------------------------------------------------------
声明：

fun Modifier.unread(show: Boolean, color: Color): Modifier = this.drawWithContent {
  drawContent()
  if (show) {
    drawCircle(color, 5.dp.toPx(), Offset(size.width - 1.dp.toPx(), 1.dp.toPx()))
  }
}

-----------------------------------------------------------------------
使用：
    .unread(!chat.msgs.last().read, WeComposeTheme.colors.badge)

-----------------------------------------------------------------------

其中有一个color 是外部传递进来的 ，是因为涉及到了主题，涉及到了@Composable的调用，这样Modifier不是 @Composable就没有办法调用

object WeComposeTheme {
  val colors: WeComposeColors
    @Composable
    get() = LocalWeComposeColors.current

  enum class Theme {
    Light, Dark, NewYear
  }
}


-----------------------------------------------------------------------
-----------------------------------------------------------------------
-----------------------------------------------------------------------
-----------------------------------------------------------------------
-----------------------------------------------------------------------


后期在 ChatPage.kt 里面也存在同样的问题


fun Modifier.offsetPercent(offsetPercentX: Float = 0f, offsetPercentY: Float = 0f) =
  this.layout { measurable, constraints ->
    val placeable = measurable.measure(constraints)
    layout(placeable.width, placeable.height) {
      val offsetX = (offsetPercentX * placeable.width).roundToInt()
      val offsetY = (offsetPercentY * placeable.height).roundToInt()
      placeable.placeRelative(offsetX, offsetY)
    }
  }

-----------------------------------------------------------------------

 这个就是不写的方案：就是写了就当与没写

fun Modifier.offsetPercent(offsetPercentX: Float = 0f, offsetPercentY: Float = 0f) =
  this.layout { measurable, constraints ->
        val placeable = measurable.measure(constraints)
        layout(placeable.width, placeable.height) {
            placeable.placeRelative(0, 0)
        }
    }
  }
-----------------------------------------------------------------------

 这个就是点击打开ChatPage.kt的效果，但是
  fun Modifier.offsetPercent(offsetPercentX: Float = 0f, offsetPercentY: Float = 0f) =
    this.layout { measurable, constraints ->
          val placeable = measurable.measure(constraints)
          layout(placeable.width, placeable.height) {
            val offset = animateIntAsState(if(viewodel.chatting) 0 else placeable.width)placeable.placeRelative(offset, 0)
          }
      }
    }

但是animateIntAsState 是一个 @Composable 方法，为此我们就改动了一下，提取出去了，

变成了  val offsetX by animateFloatAsState(if (viewModel.chatting) 0f else 1f) 0和 1 的进度了，下面按照百分比来真实的记录
-----------------------------------------------------------------------















