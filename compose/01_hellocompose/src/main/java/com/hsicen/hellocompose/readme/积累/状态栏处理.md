
  //关于沉浸的处理
   enableEdgeToEdge()
   ViewCompat.setOnApplyWindowInsetsListener(views.root) { v, insets ->
       val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())
       v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom)
       insets
   }

   //状态栏改颜色的操作
   window.statusBarColor = ContextCompat.getColor(this, com.app.theme.green.R.color.default_theme_color)

   // 设置状态栏图标为深色（适配浅背景） false 状态栏图标是白色，否则是黑色
   WindowCompat.getInsetsController(window, window.decorView).isAppearanceLightStatusBars = true



@Composable
fun changeTheme() {
    val view = LocalView.current
    val window = (view.context as Activity).window

    // 从当前主题获取颜色
    val backgroundColor = MaterialTheme.colors.background
    val useDarkIcons = MaterialTheme.colors.isLight

    // 每次主题切换都会重组并触发
    SideEffect {
        window.statusBarColor = backgroundColor.toArgb()
        window.navigationBarColor = backgroundColor.toArgb()

        val controller = WindowCompat.getInsetsController(window, view)
        controller.isAppearanceLightStatusBars = useDarkIcons
        controller.isAppearanceLightNavigationBars = useDarkIcons
    }
}
